var CLIENT_ID="6783891317-06e4vkqde6sdhr6t3nr9o7dc66mkh82c.apps.googleusercontent.com",SCOPES=["https://www.googleapis.com/auth/drive.readonly"];$(document).ready(function(){function e(e){var t=document.getElementById("authorize-div");e&&!e.error?(t.style.display="none",i()):t.style.display="inline"}function t(t){return gapi.auth.authorize({client_id:CLIENT_ID,scope:SCOPES,immediate:!1},e),!1}function i(){gapi.client.load("drive","v2",c)}function n(){var e=gapi.client.drive.files.list({maxResults:10,q:"mimeType = 'application/vnd.google-apps.document'"});e.execute(function(e){var t=e.items;if(t&&t.length>0)for(var i=0;i<t.length;i++){var n=t[i];a(n.id,n.title)}else a("","No files found.")})}function o(){fileId=window.location.hash.substring(1);var e=gapi.client.drive.files.get({fileId:fileId});e.execute(function(e){var t=gapi.auth.getToken().access_token;$.ajax({url:e.exportLinks["text/plain"],type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)},success:function(e){$("#output").html(e.replace(/\n/g,"<br>"))}})})}function a(e,t){if(""!=e){var i=$("<li></li>"),n=$("<a></a>");n.attr("href","/doc.html#"+e),n.html(t),i.append(n),$("#output ul").append(i)}else $("#output").append(t)}var c;"list"==window.action?c=n:(window.action="doc")&&(c=o),window.checkAuth=function(){gapi.auth.authorize({client_id:CLIENT_ID,scope:SCOPES.join(" "),immediate:!0},e)},$("#authorize-btn").click(t)});